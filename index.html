<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Pixpin URL-Shortener</title>

    <script type="text/javascript">
        // This is a customized version of Rafael Pedicini's index.html
        // https://github.com/rafrex/spa-github-pages
        // ----------------------------------------------------------------------
        // This script checks to see if a redirect is present in the query string
        // and converts it back into the correct url and adds it to the
        // browser's history using window.history.replaceState(...),
        // which won't cause the browser to attempt to load the new url.
        // When the single page app is loaded further down in this file,
        // the correct url will be waiting in the browser's history for
        // the single page app to route accordingly.
        var path = '';

        (function(l) {
            if (l.search) {
                var q = {};
                l.search.slice(1).split('&').forEach(function(v) {
                    var a = v.split('=');
                    q[a[0]] = a.slice(1).join('=').replace(/~and~/g, '&');
                });

                if (q.path !== undefined) {
                    window.history.replaceState(null, null,
                        l.pathname.slice(0, -1) + (q.path || '') +
                        (q.q ? ('?' + q.q) : '') +
                        l.hash
                    );
                    path = q.path;
                }
            }
        }(window.location))
    </script>
</head>
<body>
    <h1>Pixp.in</h1>
    <h2 id="path"></h2>

    <script type="text/javascript">
        var el = document.getElementById('path');
        el.innerText(path);
    </script>
</body>
</html>